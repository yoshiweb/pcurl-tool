# gurl - Webページ保存ツール

**gurl** は、Webサイトを、HTMLで保存するためのコマンドラインツールです。

通常の `curl` や「名前を付けて保存」では中身が空っぽになってしまうSPA（Single Page Application）のサイトでも、正しく保存することができます。

## 📦 できること

- **見たまま保存**: ブラウザで表示完了した後のHTMLを保存します。
- **かんたん操作**: URLを渡すだけで、自動的にファイル名を付けて保存します。
- **待機機能**: ページの読み込みが完了するまで自動的に待ちます。

## ✅ 必要なもの

このツールを使うには、パソコンに **Node.js** がインストールされている必要があります。

- **Node.js (バージョン16以上推奨)**
- インストールされているか確認するには、ターミナル（またはコマンドプロンプト）で `node -v` と入力してください。
- 未インストールの場合は [Node.js公式サイト]() から「LTS」版をダウンロードしてインストールしてください。

## 🚀 セットアップ手順

このツールのフォルダ（`package.json` がある場所）で、以下のコマンドを順番に実行してください。

### 1. ツールの準備

必要なプログラムと、専用ブラウザをダウンロードします。

```bash
npm ci
```

> ※ 初回はブラウザのダウンロードが行われるため、数分かかる場合があります。

### 2. コマンドの登録

`gurl` というコマンドでどこからでも呼び出せるように設定します。

```bash
npm link
```

> **Mac/Linuxの方へ:** エラーが出る場合は `sudo npm link` を試してください。

---

## 💻 使い方

### 基本的な使い方

ターミナルを開き、`gurl` の後に保存したいURLを入力してEnterキーを押します。

```bash
gurl "https://example.com/page?id=1&name=test"
```

**実行結果:**
成功すると、現在のフォルダに `https_example.com_page_id_1_name_test-20260220-091912.014.html` というファイルが保存されます。

### ファイル名について

保存されるファイル名はURLの末尾から自動的に決定されます。

- `.../docs/home` → `home.html`
- `.../docs/` → `index.html`

---

## ⚡️ 応用：たくさんのページを一括保存する

URLリストからまとめてダウンロードしたい場合は、以下のコマンドを活用してください。

**Mac / Linux (Bash, Zsh) の場合:**

```bash
# urls.txt というファイルにURLが1行ずつ書かれていると仮定
while read url; do gurl "$url"; done < urls.txt
```

**Windows (PowerShell) の場合:**

```powershell
# urls.txt というファイルにURLが1行ずつ書かれていると仮定
Get-Content urls.txt | ForEach-Object { gurl $_ }
```

---

## ❓ よくある質問 (FAQ)

**Q. 「command not found」や「gurl は内部コマンド...として認識されていません」と出る**
A. `npm link` が正しく完了していない可能性があります。再度実行するか、PCを再起動してみてください。それでも直らない場合は、`node gurl.js <URL>` のように直接ファイルを実行してください。

**Q. ページが真っ白なまま保存される**
A. サイトの読み込みが非常に遅い場合があります。スクリプト内の `timeout` 設定を延ばすか、ネットワーク環境を確認してください。

**Q. ログインが必要なページは保存できる？**
A. いいえ、このツールは「ログインしていない新しいブラウザ」としてアクセスします。ログイン後のページを保存するには、別途Cookieの設定など高度な改造が必要です。

---

## 🗑️ アンインストール方法

ツールが不要になった場合は、以下の手順で削除してください。

1. コマンドの登録解除: `npm unlink -g gurl`
2. フォルダの削除: このツールのフォルダごと削除してください。
